Twoim zadaniem jest zintegrowanie Supabase Auth z aplikacja Angular 21, z pelna obsluga sesji, guardow, routingu i UI. Implementuj nowy modul odpowiedzialny tylko za sesje (AuthSessionModule). Jesli konieczne sa zmiany w innych serwisach lub plikach, uwzglednij je w implementacji.

WYMAGANIA I ZRODLA KONTEKSTU
1) Obowiazkowo przeczytaj i zastosuj wytyczne z:
   - .rules/angular.mdc
   - .rules/typescript.mdc
   - .rules/frontend.mdc
   - .rules/styling.mdc

2) Zapoznaj sie z typami bazy danych:
   - frontend/src/db/database.types.ts

3) Zapoznaj sie z zawartoscia folderu auth (to punkt odniesienia dla istniejacego UI i API):
   - frontend/src/app/auth/
     - auth.api.ts, auth.types.ts, auth.validation.ts, auth.errors.ts
     - layouts/, components/, pages/

CEL
- Dodaj pelna funkcjonalnosc autoryzacji uzytkownika oparta o Supabase Auth.
- Zachowaj obecny styl UI i nie psuj istniejacych widokow.
- Wykorzystaj refresh token w obsludze sesji.

ZAKRES FUNKCJONALNY (MUST HAVE)
1) Nowy modul: AuthSessionModule (tylko sesja)
   - Odpowiada za inicjalizacje i obserwowanie sesji Supabase.
   - Udostepnia stan: isAuthenticated, user, loading.
   - Oparty o RxJS (BehaviorSubject lub Signal), ale zgodny z Angular 21.
   - Musi wspierac odswiezanie sesji przez refresh token.

2) Integracja z Supabase Auth
   - Uzyj SupabaseService (frontend/src/db/supabase.service.ts).
   - Logowanie: signInWithPassword.
   - Rejestracja: signUp.
   - Reset hasla: resetPasswordForEmail, setSession (access_token + refresh_token), updateUser.
   - Wylogowanie: signOut.

3) Routing i guardy
   - Dodaj AuthGuard do tras aplikacji wymagajacych zalogowania.
   - Dodaj GuestGuard blokujacy dostep do stron auth po zalogowaniu.
   - Upewnij sie, ze /login, /register, /forgot-password, /reset-password dzialaja zgodnie z UX.

4) Integracja z UI
   - Podlacz formularze w auth pages do AuthApi/AuthSessionModule.
   - Obsluz bledy przez ApiError i pokaz komunikaty (SnackBar lub inline error).
   - Zachowaj styl z app.component.html/scss oraz istniejacy wyglad kart auth.

5) DTO i walidacje
   - Jesli zmieniasz ksztalt DTO w auth.types.ts, to zaktualizuj AuthApi, walidacje oraz uzycia w UI.
   - Dodaj brakujace typy dla sesji/refresh tokenow, jesli potrzebne.

6) Best practices (wymagane)
   - Uzywaj standalone components i inject() zamiast konstruktorow (Angular 21).
   - Waliduj inputy i zwracaj czytelne komunikaty bledow.
   - Stosuj guard clauses i early return.
   - Logika biznesowa w serwisach, nie w komponentach.
   - Brak nadpisywania globalnych styli Material bez potrzeby.
   - Unikaj any/unknown.
   - Dodaj krotkie komentarze tylko tam, gdzie logika jest nietrywialna.

DOKLADNY PLAN IMPLEMENTACJI (MAX 3 KROKI)
1) Sesja i Supabase:
   - Utworz AuthSessionModule i AuthSessionService (nazwa dowolna), ktore inicjalizuja sesje i synchronizuja stan z Supabase.
   - Zapewnij obsluge refresh token (setSession) oraz odsluchiwanie zmian sesji (auth.onAuthStateChange).

2) Guardy i routing:
   - Dodaj AuthGuard i GuestGuard z zaleznoscia od AuthSessionService.
   - Zaktualizuj routing tak, by strony auth i strony aplikacji byly chronione odpowiednio.

3) UI i obsluga bledow:
   - Podlacz formularze auth do AuthApi (login, register, forgot, reset) i stanu sesji.
   - Zapewnij spojnosc komunikatow bledow i sukcesu (SnackBar lub inline error).

KRYTERIA AKCEPTACJI
- AuthSessionModule zarzadza sesja i refresh tokenem.
- Strony auth dzialaja i komunikuja bledy, ale bez backendu poza Supabase.
- Guardy poprawnie przekierowuja (zalogowany -> app, niezalogowany -> login).
- Kod zgodny z wytycznymi z plikow .rules i istnieja spojnosc ze stylem UI.

DODATKOWE UWAGI
- Jesli musisz zmienic DTO lub kontrakty w auth.types.ts, zrob to konsekwentnie w calym kodzie.
- Nie dodawaj nowych bibliotek.
- Nie implementuj nic poza wymaganym zakresem auth i sesji.
